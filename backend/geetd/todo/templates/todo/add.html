{% extends 'todo/base.html' %}

{% block content %}
<div class="content-container">
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-12">
                    <h1>New todo</h1>
                </div>
            </div>
        </div>
    </section>
    <div class="card">
        <form id='addTodoForm' class="form" method="post" action="/todos/create">
            <div class="card-body">
                {% csrf_token %}
                <input type="hidden" name="referrer" value="{{ form.referrer.value }}">
                <div class="form-group">
                    <label for="{{ form.title.id_for_label }}">{{ form.title.label }} :</label>
                    <input id="{{ form.title.id_for_label }}" type="text"
                           class="form-control {% if form.title.errors %} is-invalid {% endif %}"
                           name="{{ form.title.html_name }}"
                           value="{% if form.title.value %} {{ form.title.value }} {% endif %}">
                    {% if form.title.errors %}
                    <ul class="error invalid-feedback">
                        {% for error in form.title.errors %}
                        <li class="error invalid-feedback"><strong>{{ error }}</strong></li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.state.id_for_label }}">{{ form.state.label }} :</label>
                    <select id="{{ form.state.id_for_label }}" name="{{ form.state.html_name }}"
                            class="form-control {% if form.state.errors %} is-invalid {% endif %}">
                        {% for state in form.fields.state.choices %}
                        <option value="{{ state.0 }}" {% if form.state.value == state.0 %} selected {% endif %}>
                            {{ state.1 }}
                        </option>
                        {% endfor %}
                    </select>
                    {% if form.state.errors %}
                    <ul class="error invalid-feedback">
                        {% for error in form.state.errors %}
                        <li><strong>{{ error }}</strong></li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer">
                <div class="form-group">
                    <button class="btn btn-primary">Save</button>
                    <a href="{{ form.referrer.value }}" class="btn">Cancel</a>
                </div>
            </div>
        </form>
    </div>
</div>

{% endblock %}

{% block css %}
<style>
    #addTodoForm .card-footer .form-group {
        margin-bottom: 0px;
    }
</style>

{% endblock %}